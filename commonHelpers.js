import{i as _,g as v,c as L,u as w,s as S,a as B,b as h,d as $,r as y,e as U,f as C,h as u,N as b}from"./assets/vendor-be34b5aa.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const p of r.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&o(p)}).observe(document,{childList:!0,subtree:!0});function s(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerpolicy&&(r.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?r.credentials="include":n.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(n){if(n.ep)return;n.ep=!0;const r=s(n);fetch(n.href,r)}})();const E={apiKey:"AIzaSyC8186vhxW_ZDU8EVA4gnzNG0ku3rRXkNY",authDomain:"awesome-project-1330c.firebaseapp.com",projectId:"awesome-project-1330c",storageBucket:"awesome-project-1330c.appspot.com",messagingSenderId:"235904211325",appId:"1:235904211325:web:cd87abc5d9f719d2d41414",measurementId:"G-WDSXDZDNLB",databaseURL:"https://awesome-project-1330c-default-rtdb.europe-west1.firebasedatabase.app"};_(E);const l=v(),i={signUpBox:document.querySelector(".js-sign-up"),signInBox:document.querySelector(".js-sign-in"),signUpForm:document.querySelector(".js-sign-up-form"),signInForm:document.querySelector(".js-sign-in-form"),signUpBtn:document.querySelector(".js-sign-up-link"),signInBtn:document.querySelector(".js-sign-in-link"),exitBtn:document.querySelector(".js-sign-out-btn"),openModalBtn:document.querySelector(".auth-modal-open"),closeModalBtn:document.querySelector(".auth-modal-close"),modal:document.querySelector(".auth-modal-backdrop")};i.signInBtn.addEventListener("click",A);i.signUpBtn.addEventListener("click",I);i.signUpForm.addEventListener("submit",q);i.signInForm.addEventListener("submit",j);i.openModalBtn.addEventListener("click",d);i.closeModalBtn.addEventListener("click",d);i.exitBtn.addEventListener("click",M);function d(){i.modal.classList.toggle("auth-backdrop-hidden")}function A(e){e.preventDefault(),i.signUpBox.classList.add("auth-hidden"),i.signInBox.classList.remove("auth-hidden"),i.signUpBtn.classList.remove("active"),i.signInBtn.classList.add("active")}function I(e){e.preventDefault(),i.signUpBox.classList.remove("auth-hidden"),i.signInBox.classList.add("auth-hidden"),i.signUpBtn.classList.add("active"),i.signInBtn.classList.remove("active")}function q(e){e.preventDefault();const t=new FormData(e.currentTarget),s={};t.forEach((o,n)=>{s[n]=o}),x(s.email,s.password,s.username)}function j(e){e.preventDefault();const t=new FormData(e.currentTarget),s={};t.forEach((o,n)=>{s[n]=o}),D(s.email,s.password)}function x(e,t,s){L(l,e,t).then(()=>w(l.currentUser,{displayName:s})).then(()=>{console.log(`Welcome, ${s}!`),alert(`Welcome, ${s}!`),console.log(g()),d()}).catch(o=>{const n=o.code,r=o.message;console.log(n,r),alert(n,r)})}function D(e,t){S(l,e,t).then(s=>{const o=s.user;console.log(`Welcome, ${o.displayName}!`),alert(`Welcome, ${o.displayName}!`),console.log(g()),d()}).catch(s=>{const o=s.code,n=s.message;console.log(o,n),alert(o,n)})}function M(){B(l).then(()=>{console.log("Sign-out successful."),console.log("Sign-out successful."),alert("Sign-out successful.")}).catch(e=>{console.log(`An error happened. ${e}`),console.log(`An error happened. ${e}`),alert(`An error happened. ${e}`)})}function g(){const e=l.currentUser;if(e!==null)return{name:e.displayName,email:e.email,photo:e.photoURL,uid:e.uid}}function N(e){if(!e){console.log("No data to write!");return}const t=g();if(!t){console.log("User is not authorized!"),alert("User is not authorized!");return}const s=t.uid,o=h();$(y(o,"users/"+s),{books:e}),console.log("Success!"),alert("Success!")}function T(){const e=g();if(!e){console.log("User is not authorized!"),alert("User is not authorized!");return}const t=e.uid,s=y(h());U(C(s,`users/${t}`)).then(o=>{if(o.exists())return console.log(o.val()),alert("Success!"),o.val();console.log("No data available"),alert("No data available")}).catch(o=>{console.log(o),alert(o)})}const F=document.querySelector(".dbw");F.addEventListener("click",H);function H(){N([])}const R=document.querySelector(".dbr");R.addEventListener("click",T);u.defaults.baseURL="https://books-backend.p.goit.global/books";const a={list:document.querySelector(".categories__list"),galleryList:document.querySelector(".gallery"),galleryTitle:document.querySelector(".gallery__title"),categoryList:document.querySelector(".gallery__category-list"),categoriesTitle:document.querySelector(".categories__title")},W={categoriesList:"/category-list",topBooks:"/top-books",category:"/category",id:"/id"};async function k(e){return await u.get(""+e)}function O(e){k(e).then(t=>{const s=t.data;s.sort((o,n)=>o.list_name.localeCompare(n.list_name)),P(s)})}function P(e){const t=e.map(s=>`<li class="categories__list-item">${s.list_name}</li>`);a.list.insertAdjacentHTML("beforeend",t.join(""))}O(W.categoriesList);a.list.addEventListener("click",z);function z(e){K(e);let s=`/category?category=${e.target.textContent}`;k(s).then(o=>{const n=o.data;G(n)})}function G(e){const t=e.map(s=>{const{list_name:o}=s;return a.galleryTitle.textContent=o,V(s)}).join("");a.categoryList.innerHTML=t,console.log("RENDER",t);}function K(e){if(e.target.tagName==="LI"){const t=a.list.querySelector(".selected-category");t&&t.classList.remove("selected-category"),e.target.classList.add("selected-category")}a.categoriesTitle.style.color="var(--text-color)"}function V(e){const{book_image:t,author:s,title:o,_id:n}=e;return`<li class="gallery__card-item" id ="${n}" >
        <div class="gallery__image-box">
          <img class="gallery__card-image" src="${t}" alt="${o}" loading="lazy" width="180px"
          height="256px">
          <button class="gallery__card-quickviue js-modal-open" type="button" data-button="js-btn">
            QUICK VIEW
          </button>
        </div>
        <h3 class="gallery__card-title">${o}</h3>
        <p class="gallery__card-text">${s}</p>
      </li>`}const Z="https://books-backend.p.goit.global/books/";async function X(){const e=`${Z}top-books`;return(await u.get(e)).data}const Q="https://books-backend.p.goit.global/books/";async function Y(e){const t=`${Q}category?category=${e}`;return(await u.get(t)).data}const f=document.querySelector(".list_general");let c=0,m=window.innerWidth;m>=1440?c=5:m>=720?c=3:m>=240&&(c=1);X().then(e=>{console.log(e),ee(e)}).catch(e=>{b.Notify.failure("An error occurred while fetching images. Please try again.")});function J(){let e=this.getAttribute("data-my-attribute");Y(e).then(t=>{f.innerHTML="",te(t)}).catch(t=>{b.Notify.failure("An error occurred while fetching images. Please try again.")})}function ee(e){window.scrollTo(0,0);const t=e.map(o=>{const n=o.books.slice(0,c).map(r=>`
      <li class="list_five_books" data-id="${r._id}">
        <img src="${r.book_image}" alt="" width = "180" height="256" />
        <h2 class="title_general">${r.title}</h2>
        <p class="author_general">${r.author}</p>
      </li>
    `).join("");return`
      <div class="div_five_books"><li class="list_five_books"
        <p class="text_general">${o.list_name}</p>
        <ul class="list_five_general">${n}</ul>
        <button class="btn" data-my-attribute="${o.list_name}">LOAD MORE</button>
      </li></div>
    `}).join("");f.insertAdjacentHTML("beforeend",t),document.querySelectorAll(".btn").forEach(o=>{o.addEventListener("click",J)})}function te(e){window.scrollTo(0,0);const s=`<div class='div_category'><ul class="list_five_general">${e.map(n=>`<li class="list_five_books">
        <img src="${n.book_image}" alt="" width = "180" height="256" />
        <h2 class="title_general">${n.title}</h2>
        <p class="text_general">${n.author}</p>
      </li>`).join("")}</ul>
  <button class="btn_back">BACK</button></div>`;f.insertAdjacentHTML("beforeend",s),document.querySelector(".btn_back").addEventListener("click",oe)}function oe(){location.reload()}const se=[{title:"Save the Children",url:"https://www.savethechildren.net/what-we-do/emergencies/ukraine-crisis",img:"../img/fund-01.png"},{title:"Project HOPE",url:"https://www.projecthope.org/country/ukraine/",img:"../img/fund-02.png"},{title:"UNITED24",url:"https://u24.gov.ua/uk",img:"../img/fund-09.png"},{title:"International Medical Corps",url:"https://internationalmedicalcorps.org/country/ukraine/",img:"../img/fund-03.png"},{title:"Medicins Sans Frontieres",url:"https://www.msf.org/ukraine",img:"../img/fund-07.png"},{title:"RAZOM",url:"https://www.razomforukraine.org/",img:"../img/fund-04.png"},{title:"Action against hunger",url:"https://www.actionagainsthunger.org/location/europe/ukraine/",img:"../img/fund-05.png"},{title:"World vision",url:"https://www.wvi.org/emergencies/ukraine",img:"../img/fund-08.png"},{title:"Serhiy Prytula Charity Foundation",url:"https://prytulafoundation.org/en",img:"../img/fund-06.png"}],ne=document.querySelector(".support-list");function re(e){return e.map(({title:t,url:s,img:o},n)=>`<li class="support-item">
        <span class='support-item-num'>0${n+1}</span>
        <a class="support-link" target='blank' href="${s}">
          <img
            class="support-img"
            src="${o}"
            alt="${t}"
          />
        </a>
      </li>`).join("")}ne.innerHTML=re(se);
//# sourceMappingURL=commonHelpers.js.map
