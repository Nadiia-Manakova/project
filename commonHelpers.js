import{i as N,g as R,c as H,u as O,s as W,a as F,b as A,d as K,r as T,e as P,f as z,h as c,N as D,j as V}from"./assets/vendor-1c051128.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const d of i.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function o(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerpolicy&&(i.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?i.credentials="include":n.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(n){if(n.ep)return;n.ep=!0;const i=o(n);fetch(n.href,i)}})();const l={body:document.querySelector("body"),checkbox:document.querySelector(".header-theme-checkbox"),THEME_KEY:"headerTheme",themeValueLight:"light-theme",themeValueDark:"dark-theme"};function Y(){l.checkbox.checked===!0&&(localStorage.setItem(l.THEME_KEY,l.themeValueDark),l.body.classList.add("dark-theme")),l.checkbox.checked===!1&&(localStorage.getItem(l.THEME_KEY,l.themeValueLight),l.body.classList.remove("dark-theme"))}l.checkbox.addEventListener("click",Y);const G={apiKey:"AIzaSyC8186vhxW_ZDU8EVA4gnzNG0ku3rRXkNY",authDomain:"awesome-project-1330c.firebaseapp.com",projectId:"awesome-project-1330c",storageBucket:"awesome-project-1330c.appspot.com",messagingSenderId:"235904211325",appId:"1:235904211325:web:cd87abc5d9f719d2d41414",measurementId:"G-WDSXDZDNLB",databaseURL:"https://awesome-project-1330c-default-rtdb.europe-west1.firebasedatabase.app"};N(G);const p=R(),a={signUpBox:document.querySelector(".js-sign-up"),signInBox:document.querySelector(".js-sign-in"),signUpForm:document.querySelector(".js-sign-up-form"),signInForm:document.querySelector(".js-sign-in-form"),signUpBtn:document.querySelector(".js-sign-up-link"),signInBtn:document.querySelector(".js-sign-in-link"),exitBtn:document.querySelector(".js-sign-out-btn"),openModalBtn:document.querySelector(".auth-modal-open"),closeModalBtn:document.querySelector(".auth-modal-close"),modal:document.querySelector(".auth-modal-backdrop")};a.signInBtn.addEventListener("click",Z);a.signUpBtn.addEventListener("click",J);a.signUpForm.addEventListener("submit",X);a.signInForm.addEventListener("submit",Q);a.openModalBtn.addEventListener("click",y);a.closeModalBtn.addEventListener("click",y);a.exitBtn.addEventListener("click",oe);function y(){a.modal.classList.toggle("auth-backdrop-hidden")}function Z(e){e.preventDefault(),a.signUpBox.classList.add("auth-hidden"),a.signInBox.classList.remove("auth-hidden"),a.signUpBtn.classList.remove("active"),a.signInBtn.classList.add("active")}function J(e){e.preventDefault(),a.signUpBox.classList.remove("auth-hidden"),a.signInBox.classList.add("auth-hidden"),a.signUpBtn.classList.add("active"),a.signInBtn.classList.remove("active")}function X(e){e.preventDefault();const t=new FormData(e.currentTarget),o={};t.forEach((s,n)=>{o[n]=s}),ee(o.email,o.password,o.username)}function Q(e){e.preventDefault();const t=new FormData(e.currentTarget),o={};t.forEach((s,n)=>{o[n]=s}),te(o.email,o.password)}function ee(e,t,o){H(p,e,t).then(()=>O(p.currentUser,{displayName:o})).then(()=>{console.log(`Welcome, ${o}!`),alert(`Welcome, ${o}!`),console.log(k()),y()}).catch(s=>{const n=s.code,i=s.message;console.log(n,i),alert(n,i)})}function te(e,t){W(p,e,t).then(o=>{const s=o.user;console.log(`Welcome, ${s.displayName}!`),alert(`Welcome, ${s.displayName}!`),console.log(k()),y()}).catch(o=>{const s=o.code,n=o.message;console.log(s,n),alert(s,n)})}function oe(){F(p).then(()=>{console.log("Sign-out successful."),console.log("Sign-out successful."),alert("Sign-out successful.")}).catch(e=>{console.log(`An error happened. ${e}`),console.log(`An error happened. ${e}`),alert(`An error happened. ${e}`)})}function k(){const e=p.currentUser;if(e!==null)return{name:e.displayName,email:e.email,photo:e.photoURL,uid:e.uid}}function se(e){if(!e){console.log("No data to write!");return}const t=k();if(!t){console.log("User is not authorized!"),alert("User is not authorized!");return}const o=t.uid,s=A();K(T(s,"users/"+o),{books:e}),console.log("Success!"),alert("Success!")}function ne(){const e=k();if(!e){console.log("User is not authorized!"),alert("User is not authorized!");return}const t=e.uid,o=T(A());P(z(o,`users/${t}`)).then(s=>{if(s.exists())return console.log(s.val()),alert("Success!"),s.val();console.log("No data available"),alert("No data available")}).catch(s=>{console.log(s),alert(s)})}const ie=document.querySelector(".dbw");ie.addEventListener("click",ae);function ae(){se([])}const le=document.querySelector(".dbr");le.addEventListener("click",ne);c.defaults.baseURL="https://books-backend.p.goit.global/books";const r={list:document.querySelector(".categories__list"),galleryList:document.querySelector(".gallery"),galleryTitle:document.querySelector(".gallery__title"),categoryList:document.querySelector(".gallery__category-list"),categoriesTitle:document.querySelector(".categories__title")},re={categoriesList:"/category-list",topBooks:"/top-books",category:"/category",id:"/id"};async function j(e){return await c.get(""+e)}function ce(e){j(e).then(t=>{const o=t.data;o.sort((s,n)=>s.list_name.localeCompare(n.list_name)),de(o)})}function de(e){const t=e.map(o=>`<li class="categories__list-item">${o.list_name}</li>`);r.list.insertAdjacentHTML("beforeend",t.join(""))}ce(re.categoriesList);r.list.addEventListener("click",ue);function ue(e){pe(e);let o=`/category?category=${e.target.textContent}`;j(o).then(s=>{const n=s.data;ge(n)})}function ge(e){const t=e.map(o=>{const{list_name:s}=o;return r.galleryTitle.textContent=s,me(o)}).join("");r.categoryList.innerHTML=t,console.log("RENDER",t);}function pe(e){if(e.target.tagName==="LI"){const t=r.list.querySelector(".selected-category");t&&t.classList.remove("selected-category"),e.target.classList.add("selected-category")}r.categoriesTitle.style.color="var(--text-color)"}function me(e){const{book_image:t,author:o,title:s,_id:n}=e;return`<li class="gallery__card-item" id ="${n}" >
        <div class="gallery__image-box">
          <img class="gallery__card-image" src="${t}" alt="${s}" loading="lazy" width="180px"
          height="256px">
          <button class="gallery__card-quickviue js-modal-open" type="button" data-button="js-btn">
            QUICK VIEW
          </button>
        </div>
        <h3 class="gallery__card-title">${s}</h3>
        <p class="gallery__card-text">${o}</p>
      </li>`}const he="https://books-backend.p.goit.global/books/";async function fe(){const e=`${he}top-books`;return(await c.get(e)).data}const be="https://books-backend.p.goit.global/books/";async function ye(e){const t=`${be}category?category=${e}`;return(await c.get(t)).data}const S=document.querySelector(".list_general");let h=0,w=window.innerWidth;w>=1440?h=5:w>=720?h=3:w>=240&&(h=1);fe().then(e=>{console.log(e),ve(e)}).catch(e=>{D.Notify.failure("An error occurred while fetching images. Please try again.")});function ke(){let e=this.getAttribute("data-my-attribute");ye(e).then(t=>{S.innerHTML="",Le(t)}).catch(t=>{D.Notify.failure("An error occurred while fetching images. Please try again.")})}function ve(e){window.scrollTo(0,0);const t=e.map(s=>{const n=s.books.slice(0,h).map(i=>`
      <li class="list_five_books" data-id="${i._id}">
        <img src="${i.book_image}" alt="" width = "180" height="256" />
        <h2 class="title_general">${i.title}</h2>
        <p class="author_general">${i.author}</p>
      </li>
    `).join("");return`
      <div class="div_five_books"><li class="list_five_books"
        <p class="text_general">${s.list_name}</p>
        <ul class="list_five_general">${n}</ul>
        <button class="btn" data-my-attribute="${s.list_name}">LOAD MORE</button>
      </li></div>
    `}).join("");S.insertAdjacentHTML("beforeend",t),document.querySelectorAll(".btn").forEach(s=>{s.addEventListener("click",ke)})}function Le(e){window.scrollTo(0,0);const o=`<div class='div_category'><ul class="list_five_general">${e.map(n=>`<li class="list_five_books">
        <img src="${n.book_image}" alt="" width = "180" height="256" />
        <h2 class="title_general">${n.title}</h2>
        <p class="text_general">${n.author}</p>
      </li>`).join("")}</ul>
  <button class="btn_back">BACK</button></div>`;S.insertAdjacentHTML("beforeend",o),document.querySelector(".btn_back").addEventListener("click",_e)}function _e(){location.reload()}const we=[{title:"Save the Children",url:"https://www.savethechildren.net/what-we-do/emergencies/ukraine-crisis",img:"../img/fund-01.png"},{title:"Project HOPE",url:"https://www.projecthope.org/country/ukraine/",img:"../img/fund-02.png"},{title:"UNITED24",url:"https://u24.gov.ua/uk",img:"../img/fund-09.png"},{title:"International Medical Corps",url:"https://internationalmedicalcorps.org/country/ukraine/",img:"../img/fund-03.png"},{title:"Medicins Sans Frontieres",url:"https://www.msf.org/ukraine",img:"../img/fund-07.png"},{title:"RAZOM",url:"https://www.razomforukraine.org/",img:"../img/fund-04.png"},{title:"Action against hunger",url:"https://www.actionagainsthunger.org/location/europe/ukraine/",img:"../img/fund-05.png"},{title:"World vision",url:"https://www.wvi.org/emergencies/ukraine",img:"../img/fund-08.png"},{title:"Serhiy Prytula Charity Foundation",url:"https://prytulafoundation.org/en",img:"../img/fund-06.png"}],b=document.querySelector(".support-list");function Se(e){return e.map(({title:t,url:o,img:s},n)=>`<li class="support-item">
        <span class='support-item-num'>0${n+1}</span>
        <a class="support-link" target='blank' href="${o}">
          <img
            class="support-img"
            src="${s}"
            alt="${t}"
          />
        </a>
      </li>`).join("")}b.innerHTML=Se(we);const f=document.querySelector(".support-slide-btn"),C=document.querySelector(".support-slide-down-btn"),x=document.querySelector(".support-slide-up-btn");f.addEventListener("click",Ee);function Ee(){f.classList.contains("top")?(f.classList.remove("top"),x.style.display="none",C.style.display="block",Be()):($e(),f.classList.add("top"),C.style.display="none",x.style.display="block")}function Be(){b.scrollTop=0}function $e(){b.scrollTop=b.scrollHeight}c.defaults.baseURL="https://books-backend.p.goit.global/books/";async function I(e){const{data:t}=await c(e);return console.log(t),t}document.querySelector(".list");const U=document.querySelector("body"),m=[];document.addEventListener("click",qe);function qe(e){if(console.log(e),!e.target.closest(".users-list-item"))return;console.log(e.target),e.preventDefault();const o=e.target.closest(".users-list-item").dataset.id;console.log(o),I(o).then(s=>{console.log(m);const{_id:n,author:i,book_image:d,title:E,description:M,buy_links:Ce}=s,B=V.create(`
   <div class="modal-book-js" data-id="${n}">
          <button type="button" class="modal-book-btn-close">
          <svg class="icons-modal"  width="14" height="14">
          <use href="./images/icons-sprite.svg#x-close-btn"></use>
        </svg>
        </button>
          <img src="${d}" alt="${E}" class="modal-img-book widht=192 height=281"/>
          <div class="modal-list-infobook">
          <h1 class="modal-book-title">${E}</h1>
          <h2 class="modal-book-autor">${i}</h2>
          <p class="modal-book-description">${M}</p>
          <div class="modal-list-shops">
          <ul class="modal-book-list-shops">
            <li>Amazon</li>
            <li>Apple Books</li>
            <li>Barnes and Noble</li>
            <li>bookshop</li>
            </div>
          </ul>
          </div>
          <button type="button" class="modal-book-btn hidden btn-add" id="add">
          add to shopping list</button>
          <button type="button" class="modal-book-btn hidden" id="remove">
          remove from the shopping list</button>
          <p class="txt-remove hidden">Сongratulations! You have added the book 
          to the shopping list. To delete, press the button “Remove from the shopping list”.</p>
    </div>`,{onShow:()=>{document.addEventListener("keydown",$),U.style.overflow="hidden"},onClose:()=>{document.removeEventListener("keydown",$),U.style.overflow="auto"}});function $(L){const _="Escape";L.code===_&&B.close()}B.show();const q="booklist";m.push(s);const u=document.querySelector("#add"),g=document.querySelector("#remove"),v=document.querySelector(".txt-remove");I(o).then(L=>{const _=L.id;localStorage.getItem({idBook:_})!==null?(u.classList.add("hidden"),g.classList.remove("hidden")):(u.classList.remove("hidden"),g.classList.add("hidden"),v.classList.add("hidden")),u.addEventListener("click",()=>{localStorage.setItem(q,JSON.stringify(m)),u.classList.add("hidden"),g.classList.remove("hidden"),v.classList.remove("hidden")}),g.addEventListener("click",()=>{localStorage.removeItem(q,JSON.stringify(m)),u.classList.remove("hidden"),g.classList.add("hidden"),v.classList.add("hidden")})})})}
//# sourceMappingURL=commonHelpers.js.map
