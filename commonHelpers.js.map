{"version":3,"file":"commonHelpers.js","sources":["../src/js/auth-fire-base-config.js","../src/js/auth.js","../src/js/support.js"],"sourcesContent":["export const fireBaseConfig = {\n  apiKey: 'AIzaSyC8186vhxW_ZDU8EVA4gnzNG0ku3rRXkNY',\n  authDomain: 'awesome-project-1330c.firebaseapp.com',\n  projectId: 'awesome-project-1330c',\n  storageBucket: 'awesome-project-1330c.appspot.com',\n  messagingSenderId: '235904211325',\n  appId: '1:235904211325:web:cd87abc5d9f719d2d41414',\n  measurementId: 'G-WDSXDZDNLB',\n  databaseURL:\n    'https://awesome-project-1330c-default-rtdb.europe-west1.firebasedatabase.app',\n};\n","// NOTIFLIX :\nimport Notiflix from 'notiflix';\n// FIREBASE APP :\nimport { initializeApp } from 'firebase/app';\nimport { fireBaseConfig } from './auth-fire-base-config';\n// AUTH :\nimport {\n  getAuth,\n  createUserWithEmailAndPassword,\n  signInWithEmailAndPassword,\n  updateProfile,\n  onAuthStateChanged,\n  signOut,\n} from 'firebase/auth';\nconst app = initializeApp(fireBaseConfig);\nconst auth = getAuth();\n// DATEBASE :\nimport { getDatabase, ref, set, onValue, child, get } from 'firebase/database';\n\n// ELEMENTS :\nconst elements = {\n  signUpBox: document.querySelector('.js-sign-up'),\n  signInBox: document.querySelector('.js-sign-in'),\n  signUpForm: document.querySelector('.js-sign-up-form'),\n  signInForm: document.querySelector('.js-sign-in-form'),\n  signUpBtn: document.querySelector('.js-sign-up-link'),\n  signInBtn: document.querySelector('.js-sign-in-link'),\n  exitBtn: document.querySelector('.js-exit'),\n  openModalBtn: document.querySelector('.auth-modal-open'),\n  closeModalBtn: document.querySelector('.auth-modal-close'),\n  modal: document.querySelector('.auth-modal-backdrop'),\n};\n\n// LISTENERS :\nelements.signInBtn.addEventListener('click', signInActivate);\nelements.signUpBtn.addEventListener('click', signUpActivate);\nelements.signUpForm.addEventListener('submit', signUpHandler);\nelements.signInForm.addEventListener('submit', signInHandler);\nelements.openModalBtn.addEventListener('click', toggleModal);\nelements.closeModalBtn.addEventListener('click', toggleModal);\nelements.exitBtn.addEventListener('click', exitHandler);\n\n// FUNCTIONS :\nfunction toggleModal() {\n  elements.modal.classList.toggle('auth-backdrop-hidden');\n}\n\nfunction signInActivate(event) {\n  event.preventDefault();\n  elements.signUpBox.classList.add('auth-hidden');\n  elements.signInBox.classList.remove('auth-hidden');\n  elements.signUpBtn.classList.remove('active');\n  elements.signInBtn.classList.add('active');\n}\n\nfunction signUpActivate(event) {\n  event.preventDefault();\n  elements.signUpBox.classList.remove('auth-hidden');\n  elements.signInBox.classList.add('auth-hidden');\n  elements.signUpBtn.classList.add('active');\n  elements.signInBtn.classList.remove('active');\n}\n\nfunction signUpHandler(event) {\n  event.preventDefault();\n  const formData = new FormData(event.currentTarget);\n  const data = {};\n  formData.forEach((value, key) => {\n    data[key] = value;\n  });\n  signUpService(data.email, data.password, data.username);\n}\n\nfunction signInHandler(event) {\n  event.preventDefault();\n  const formData = new FormData(event.currentTarget);\n  const data = {};\n  formData.forEach((value, key) => {\n    data[key] = value;\n  });\n  signInService(data.email, data.password);\n}\n\n// SERVICES :\nfunction signUpService(email, password, name) {\n  createUserWithEmailAndPassword(auth, email, password)\n    .then(() =>\n      updateProfile(auth.currentUser, {\n        displayName: name,\n      })\n    )\n    .then(() => {\n      //   Notiflix.Notify.success(`Welcome, ${name}!`);\n      console.log(`Welcome, ${name}!`);\n      alert(`Welcome, ${name}!`);\n      getUserData();\n      toggleModal();\n    })\n    .catch(error => {\n      const errorCode = error.code;\n      const errorMessage = error.message;\n      //   Notiflix.Notify.failure(errorCode, errorMessage);\n      console.log(errorCode, errorMessage);\n      alert(errorCode, errorMessage);\n    });\n}\n\nfunction signInService(email, password) {\n  signInWithEmailAndPassword(auth, email, password)\n    .then(userCredential => {\n      const user = userCredential.user;\n      console.log(`Welcome, ${user.displayName}!`);\n      alert(`Welcome, ${user.displayName}!`);\n      //   Notiflix.Notify.success(`Welcome, ${user.displayName}!`);\n\n      getUserData();\n      toggleModal();\n    })\n    .catch(error => {\n      const errorCode = error.code;\n      const errorMessage = error.message;\n      //   Notiflix.Notify.failure(errorCode, errorMessage);\n      console.log(errorCode, errorMessage);\n      alert(errorCode, errorMessage);\n    });\n}\n\nfunction exitHandler() {\n  signOut(auth)\n    .then(() => {\n      console.log('Sign-out successful.');\n      //   Notiflix.Notify.success('Sign-out successful.');\n      console.log('Sign-out successful.');\n      alert('Sign-out successful.');\n    })\n    .catch(error => {\n      console.log(`An error happened. ${error}`);\n      //   Notiflix.Notify.failure(`An error happened. ${error}`);\n      console.log(`An error happened. ${error}`);\n      alert(`An error happened. ${error}`);\n    });\n}\n\n// GET USER DATA :\nfunction getUserData() {\n  const user = auth.currentUser;\n  if (user !== null) {\n    const userData = {\n      name: user.displayName,\n      email: user.email,\n      photo: user.photoURL,\n      uid: user.uid,\n    };\n    return userData;\n  }\n}\n\n//  write User Shopping List\nfunction writeUserShoppingList(booksArr) {\n  const userData = getUserData();\n  if (!userData) {\n    console.log(`User is not authorized!`);\n    alert(`User is not authorized!`);\n    return;\n  }\n  const userId = userData.uid;\n  const db = getDatabase();\n  set(ref(db, 'users/' + userId), {\n    books: booksArr,\n  });\n  console.log(`Success!`);\n  alert(`Success!`);\n}\n\n// read User Shopping List\nfunction readUserShoppingList() {\n  const userData = getUserData();\n  if (!userData) {\n    console.log(`User is not authorized!`);\n    alert(`User is not authorized!`);\n    return;\n  }\n  const userId = userData.uid;\n  const dbRef = ref(getDatabase());\n  get(child(dbRef, `users/${userId}`))\n    .then(snapshot => {\n      if (snapshot.exists()) {\n        console.log(snapshot.val());\n        alert(`Success!`);\n        return snapshot.val();\n      } else {\n        console.log('No data available');\n        alert('No data available');\n      }\n    })\n    .catch(error => {\n      console.log(error);\n      alert(error);\n    });\n}\n\n// EXPORT :\n\nexport {\n  getUserData,\n  exitHandler,\n  writeUserShoppingList,\n  readUserShoppingList,\n};\n//\n//\n//\n\n//  INSTRUCTIONS :\n//\n// IMPORT & INITIALIZATION:\n// import { initializeApp } from 'firebase/app';\n// import {\n//   getAuth,\n//   createUserWithEmailAndPassword,\n//   signInWithEmailAndPassword,\n//   updateProfile,\n//   onAuthStateChanged,\n//   signOut,\n// } from 'firebase/auth';\n// import { fireBaseConfig } from './path/to/this-module';\n// const app = initializeApp(fireBaseConfig);\n// const auth = getAuth();\n\n// GET AUTH STATE :\n// onAuthStateChanged(auth, user => {\n//   if (user) {\n//     // User is signed in, see docs for a list of available properties\n//     // https://firebase.google.com/docs/reference/js/auth.user\n//     const uid = user.uid;\n//     // ...\n//   } else {\n//     // User is signed out\n//     // ...\n//   }\n// });\n\n// UPDATE PHOTO :\n// updateProfile(auth.currentUser, {\n//   displayName: 'Jane Q. User',\n//   photoURL: 'https://example.com/jane-q-user/profile.jpg',\n// })\n//   .then(() => {\n//     // Profile updated!\n//     // ...\n//   })\n//   .catch(error => {\n//     // An error occurred\n//     // ...\n//   });\n\n// TEMPORARY :\nconst dbwBtn = document.querySelector('.dbw');\ndbwBtn.addEventListener('click', writeClickHandler);\n\nfunction writeClickHandler() {\n  writeUserShoppingList([1, 3, 5, 7]);\n}\nconst dbrBtn = document.querySelector('.dbr');\ndbrBtn.addEventListener('click', readUserShoppingList);\n","\n\nconst supportFonds = [\n    {\n        title: 'Save the Children',\n        url:\n            'https://www.savethechildren.net/what-we-do/emergencies/ukraine-crisis',\n        img: '../img/fund-01.png',\n    },\n    {\n        title: 'Project HOPE',\n        url: 'https://www.projecthope.org/country/ukraine/',\n        img: '../img/fund-02.png',\n    },\n    {\n        title: 'UNITED24',\n        url: 'https://u24.gov.ua/uk',\n        img: '../img/fund-09.png',\n    },\n    {\n        title: 'International Medical Corps',\n        url: 'https://internationalmedicalcorps.org/country/ukraine/',\n        img: '../img/fund-03.png',\n    },\n    {\n        title: 'Medicins Sans Frontieres',\n        url: 'https://www.msf.org/ukraine',\n        img: '../img/fund-07.png',\n    },\n    {\n        title: 'RAZOM',\n        url: 'https://www.razomforukraine.org/',\n        img: '../img/fund-04.png',\n    },\n    {\n        title: 'Action against hunger',\n        url: 'https://www.actionagainsthunger.org/location/europe/ukraine/',\n        img: '../img/fund-05.png',\n    },\n    {\n        title: 'World vision',\n        url: 'https://www.wvi.org/emergencies/ukraine',\n        img: '../img/fund-08.png',\n    },\n    {\n        title: 'Serhiy Prytula Charity Foundation',\n        url: 'https://prytulafoundation.org/en',\n        img: '../img/fund-06.png',\n    },\n];\n\nconst supportList = document.querySelector('.support-list');\n\nfunction supportListCreateMarkup(supportFonds) {\n    return supportFonds.map(({ title, url, img }, index) => \n     `<li class=\"support-item\">\n        <span class='support-item-num'>0${index + 1}</span>\n        <a class=\"support-link\" target='blank' href=\"${url}\">\n          <img\n            class=\"support-img\"\n            src=\"${img}\"\n            alt=\"${title}\"\n          />\n        </a>\n      </li>`).join('');\n}\nsupportList.innerHTML = supportListCreateMarkup(supportFonds);\n\n\n"],"names":["fireBaseConfig","initializeApp","auth","getAuth","elements","signInActivate","signUpActivate","signUpHandler","signInHandler","toggleModal","exitHandler","event","formData","data","value","key","signUpService","signInService","email","password","name","createUserWithEmailAndPassword","updateProfile","getUserData","error","errorCode","errorMessage","signInWithEmailAndPassword","userCredential","user","signOut","writeUserShoppingList","booksArr","userData","userId","db","getDatabase","set","ref","readUserShoppingList","dbRef","get","child","snapshot","dbwBtn","writeClickHandler","dbrBtn","supportFonds","supportList","supportListCreateMarkup","title","url","img","index"],"mappings":"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"}