{"version":3,"file":"commonHelpers2.js","sources":["../src/js/shopping.js"],"sourcesContent":["import Pagination from 'tui-pagination';\n// import 'tui-pagination/dist/tui-pagination.css';\n\nconst LOCAL_KEY = \"booklist\";\nconst container = document.querySelector(\"#pagination\");\nconst cartList = document.querySelector(\".cart-list\");\nconst emptyCart = document.querySelector(\".empty-cart\");\n\nconst itemPerPage = 3;\nconst visiblePage = 3;\n\nemptyCart.style.display = \"none\";\n\nlet data = [];\n\ntry {\n        data = JSON.parse(localStorage.getItem(LOCAL_KEY));\n        if (!data.length) {\n            emptyCart.style.display = \"block\";\n        } \n    if (data.length <=itemPerPage) {\n            container.style.display = \"none\";\n        } \n            cartList.innerHTML = createCartMurkup(data, 1);\n        \n  } catch (error) {\n    console.error(\"Get state error: \", error.message);\n  }\n\nconst options = {\n    totalItems: data.length,\n    itemsPerPage: itemPerPage,\n    visiblePages: visiblePage,\n    page: 1,\n    centerAlign: false,\n    template: {\n         page: '<a href=\"#\" class=\"tui-page-btn\">{{page}}</a>',\n         currentPage: '<strong class=\"tui-page-btn tui-is-selected\">{{page}}</strong>',\n         moveButton:\n             '<a href=\"#\" class=\"tui-page-btn tui-{{type}}\">' +\n                 '<span class=\"tui-ico-{{type}}\"></span>' +\n             '</a>',\n         disabledMoveButton:\n             '<span class=\"tui-page-btn tui-is-disabled tui-{{type}}\">' +\n                 '<span class=\"tui-ico-{{type}}\">{{type}}</span>' +\n             '</span>',\n         moreButton:\n             '<a href=\"#\" class=\"tui-page-btn tui-{{type}}-is-ellip\">' +\n                 '<span class=\"tui-ico-ellip\">...</span>' +\n             '</a>'\n     }\n}\n\n//  `<a href=\"#\" class=\"tui-page-btn tui-{{type}}\"> \n//                  <span class=\"tui-ico-{{type}}\"><svg class=\"\" width=\"24\" height=\"24\">\n//                 <use href=\"../img/icons-sprite.svg#arrow-left-previous-page-icon\"></use>\n//                 </svg></span> \n//              </a>`\n\nlet pagination = new Pagination(container, options);\n\n\n\ndocument.addEventListener(\"click\", handlerDeleteCart);\n\n\npagination.on('afterMove', (event) => {\n    let currentPage = event.page;\n     cartList.innerHTML = createCartMurkup(data, currentPage);\n    console.log('currentPage Global after :>> ', currentPage);\n});\n\n\n\n\n\n\n\n\n\n// ----------------------------------------------------------------------------------------РОЗМІТКА\n\n\nfunction createCartMurkup(arr, currentPage) {\n    cartList.innerHTML = \"\";\n    const start = itemPerPage * (currentPage-1);\n    const end = start + itemPerPage;\n    const paginatedData = arr.slice(start, end);\n    return paginatedData.map(({ _id, author, book_image, title, description, buy_links: [{url:amazon}, {url:appleBook}], list_name }) =>\n       ` <li class=\"cart-item\" data-id =\"${_id}\">\n            <img src=\"${book_image}\" alt=\"${title}\" class=\"cart-item-img\">\n            <div class=\"cart-item-content\">\n            <div class=\"cart-content-header\">\n                <h3 class=\"cart-item-title\">${title}</h3>\n                <p class=\"cart-item-category cart-item-label\">${list_name}</p>\n            </div>\n                <p class=\"cart-item-description\">${description}</p>\n                <p class=\"cart-item-author cart-item-label\">${author}</p>\n                <button class=\"cart-item-delete\">\n                <svg class=\"cart-delete-icon\" width=\"24\" height=\"24\">\n                <use href=\"../img/icons-sprite.svg#cart-purple-round\"></use>\n                </svg>\n                </button>\n                <ul class=\"cart-item-links\">\n                <li><a href=\"${amazon}\" class=\"cart-item-link\">amazon</a></li>\n                <li><a href=\"${appleBook}\" class=\"cart-item-link\">apple book</a></li>\n                </ul>\n            </div>\n        </li>`).join(\"\");\n}\n\n\n// ----------------------------------------------------------------------------------------ВИДАЛЕННЯ ЕЛЕМЕНТІВ КОРЗИНИ\n\nfunction handlerDeleteCart(e) {\n    if (!e.target.closest(\".cart-item-delete\")) return;\n   \n    const idOfBook = e.target.closest(\".cart-item\").dataset.id;\n    try {\n        const products = data.filter(({ _id }) => _id !== idOfBook);\n        localStorage.setItem(LOCAL_KEY, JSON.stringify(products));\n        data = JSON.parse(localStorage.getItem(LOCAL_KEY));\n        if (data.length <=itemPerPage) {\n            container.style.display = \"none\";\n        } \n        pagination.setTotalItems(data.length);\n        pagination.reset(data.length);\n        let currentPage = pagination.getCurrentPage();\n        cartList.innerHTML = createCartMurkup(data, currentPage);\n  } catch (error) {\n    console.error(\"Get state error: \", error.message);\n    }\n    if (!data.length) {\n    emptyCart.style.display = \"block\";\n}\n}\n\n\n\n\n\n"],"names":["LOCAL_KEY","container","cartList","emptyCart","itemPerPage","visiblePage","data","createCartMurkup","error","options","pagination","Pagination","handlerDeleteCart","event","currentPage","arr","start","end","_id","author","book_image","title","description","amazon","appleBook","list_name","idOfBook","products"],"mappings":"wFAGA,MAAMA,EAAY,WACZC,EAAY,SAAS,cAAc,aAAa,EAChDC,EAAW,SAAS,cAAc,YAAY,EAC9CC,EAAY,SAAS,cAAc,aAAa,EAEhDC,EAAc,EACdC,EAAc,EAEpBF,EAAU,MAAM,QAAU,OAE1B,IAAIG,EAAO,CAAA,EAEX,GAAI,CACIA,EAAO,KAAK,MAAM,aAAa,QAAQN,CAAS,CAAC,EAC5CM,EAAK,SACNH,EAAU,MAAM,QAAU,SAE9BG,EAAK,QAASF,IACVH,EAAU,MAAM,QAAU,QAE1BC,EAAS,UAAYK,EAAiBD,EAAM,CAAC,CAEtD,OAAQE,EAAP,CACA,QAAQ,MAAM,oBAAqBA,EAAM,OAAO,CACjD,CAEH,MAAMC,EAAU,CACZ,WAAYH,EAAK,OACjB,aAAcF,EACd,aAAcC,EACd,KAAM,EACN,YAAa,GACb,SAAU,CACL,KAAM,gDACN,YAAa,iEACb,WACI,2FAGJ,mBACI,gHAGJ,WACI,mGAGP,CACN,EAQA,IAAIK,EAAa,IAAIC,EAAWV,EAAWQ,CAAO,EAIlD,SAAS,iBAAiB,QAASG,CAAiB,EAGpDF,EAAW,GAAG,YAAcG,GAAU,CAClC,IAAIC,EAAcD,EAAM,KACvBX,EAAS,UAAYK,EAAiBD,EAAMQ,CAAW,EACxD,QAAQ,IAAI,gCAAiCA,CAAW,CAC5D,CAAC,EAaD,SAASP,EAAiBQ,EAAKD,EAAa,CACxCZ,EAAS,UAAY,GACrB,MAAMc,EAAQZ,GAAeU,EAAY,GACnCG,EAAMD,EAAQZ,EAEpB,OADsBW,EAAI,MAAMC,EAAOC,CAAG,EACrB,IAAI,CAAC,CAAE,IAAAC,EAAK,OAAAC,EAAQ,WAAAC,EAAY,MAAAC,EAAO,YAAAC,EAAa,UAAW,CAAC,CAAC,IAAIC,CAAM,EAAG,CAAC,IAAIC,CAAS,CAAC,EAAG,UAAAC,CAAW,IAC7H,oCAAoCP;AAAA,wBACnBE,WAAoBC;AAAA;AAAA;AAAA,8CAGEA;AAAA,gEACkBI;AAAA;AAAA,mDAEbH;AAAA,8DACWH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+BAO/BI;AAAA,+BACAC;AAAA;AAAA;AAAA,cAGjB,EAAE,KAAK,EAAE,CACvB,CAKA,SAASZ,EAAkB,EAAG,CAC1B,GAAI,CAAC,EAAE,OAAO,QAAQ,mBAAmB,EAAG,OAE5C,MAAMc,EAAW,EAAE,OAAO,QAAQ,YAAY,EAAE,QAAQ,GACxD,GAAI,CACA,MAAMC,EAAWrB,EAAK,OAAO,CAAC,CAAE,IAAAY,KAAUA,IAAQQ,CAAQ,EAC1D,aAAa,QAAQ1B,EAAW,KAAK,UAAU2B,CAAQ,CAAC,EACxDrB,EAAO,KAAK,MAAM,aAAa,QAAQN,CAAS,CAAC,EAC7CM,EAAK,QAASF,IACdH,EAAU,MAAM,QAAU,QAE9BS,EAAW,cAAcJ,EAAK,MAAM,EACpCI,EAAW,MAAMJ,EAAK,MAAM,EAC5B,IAAIQ,EAAcJ,EAAW,iBAC7BR,EAAS,UAAYK,EAAiBD,EAAMQ,CAAW,CAC5D,OAAQN,EAAP,CACA,QAAQ,MAAM,oBAAqBA,EAAM,OAAO,CAC/C,CACIF,EAAK,SACVH,EAAU,MAAM,QAAU,QAE9B"}