{"version":3,"file":"commonHelpers2.js","sources":["../src/amazon.png","../src/apple-books.png","../src/img/icons-sprite.svg","../src/js/shopping.js"],"sourcesContent":["export default \"__VITE_ASSET__587f2a82__\"","export default \"data:image/png;base64,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\"","export default \"__VITE_ASSET__b0d4b350__\"","import Pagination from 'tui-pagination';\nimport { showLoader, hideLoader } from './loader.js';\nimport { writeUserShoppingList } from './auth.js';\nimport amazonIco from \"../amazon.png\";\nimport appleIco from \"../apple-books.png\";\nimport cartIco from \"../img/icons-sprite.svg\";\n\n// import 'tui-pagination/dist/tui-pagination.css';\n\nconst LOCAL_KEY = \"booklist\";\nconst container = document.querySelector(\"#pagination\");\nconst cartList = document.querySelector(\".cart-list\");\nconst emptyCart = document.querySelector(\".empty-cart\");\n\nconst windowInnerWidth = window.innerWidth;\n\nlet itemPerPage = 4;\nlet visiblePage = 2;\n\nif (windowInnerWidth > 768) {\n    itemPerPage = 3;\n    visiblePage = 3;\n}\n\nemptyCart.style.display = \"none\";\n\nlet data = [];\n\nshowLoader();\n\ntry {\n    data = JSON.parse(localStorage.getItem(LOCAL_KEY));\n    hideLoader();\n        if (!data.length) {\n            emptyCart.style.display = \"block\";\n        } \n    if (data.length <=itemPerPage) {\n            container.style.display = \"none\";\n        } \n            cartList.innerHTML = createCartMurkup(data, 1);\n        \n  } catch (error) {\n    console.error(\"Get state error: \", error.message);\n  }\n\nconst options = {\n    totalItems: data.length,\n    itemsPerPage: itemPerPage,\n    visiblePages: visiblePage,\n    page: 1,\n    centerAlign: false,\n    template: {\n         page: '<a href=\"#\" class=\"tui-page-btn\">{{page}}</a>',\n         currentPage: '<strong class=\"tui-page-btn tui-is-selected\">{{page}}</strong>',\n         moveButton:\n             '<a href=\"#\" class=\"tui-page-btn tui-{{type}}\">' +\n                 '<span class=\"tui-ico-{{type}}\">{{type}}</span>' +\n             '</a>',\n         disabledMoveButton:\n             '<span class=\"tui-page-btn tui-is-disabled tui-{{type}}\">' +\n                 '<span class=\"tui-ico-{{type}}\">{{type}}</span>' +\n             '</span>',\n         moreButton:\n             '<a href=\"#\" class=\"tui-page-btn tui-{{type}}-is-ellip\">' +\n                 '<span class=\"tui-ico-ellip\">...</span>' +\n             '</a>'\n     }\n}\n\nlet pagination = new Pagination(container, options);\n\n\n\ndocument.addEventListener(\"click\", handlerDeleteCart);\n\n\npagination.on('afterMove', (event) => {\n    let currentPage = event.page;\n     cartList.innerHTML = createCartMurkup(data, currentPage);\n});\n\n\n\n\n\n\n\n\n\n// ----------------------------------------------------------------------------------------РОЗМІТКА\n\nfunction createCartMurkup(arr, currentPage) {\n    cartList.innerHTML = \"\";\n    // hideLoader();\n    const start = itemPerPage * (currentPage-1);\n    const end = start + itemPerPage;\n    const paginatedData = arr.slice(start, end);\n    return paginatedData.map(({ _id, author, book_image, title, description, buy_links: [{url:amazon}, {url:appleBook}], list_name }) =>\n        ` <li class=\"cart-item\" data-id =\"${_id}\">\n            <img src=\"${book_image}\" alt=\"${title}\" class=\"cart-item-img\">\n            <div class=\"cart-item-content\">\n            <div class=\"cart-content-header\">\n                <h3 class=\"cart-item-title\">${title}</h3>\n                <p class=\"cart-item-category cart-item-label\">${list_name}</p>\n            </div>\n                <p class=\"cart-item-description\">${description}</p>\n                <p class=\"cart-item-author cart-item-label\">${author}</p>\n                <button class=\"cart-item-delete\">\n                <svg class=\"cart-delete-icon\" width=\"24\" height=\"24\">\n                <use href=\"${cartIco}#cart-purple-round\"></use>\n                </svg>\n                </button>\n                <ul class=\"cart-item-links\">\n                <li><a href=\"${amazon}\" target=\"_blank\" class=\"cart-item-link\"><img src=\"${amazonIco}\" alt=\"amazon\" widht=\"32\" height=\"11\" class=\"modal-img-shop cart-link-img-amazon\"/></a></li>\n                <li><a href=\"${appleBook}\" target=\"_blank\" class=\"cart-item-link\"><img src=\"${appleIco}\" alt=\"apple-books\" widht=\"16\" height=\"16\" class=\"modal-img-shop cart-link-img-apple\"/></a></li>\n                </ul>\n            </div>\n        </li>`).join(\"\");\n}\n\n\n// ----------------------------------------------------------------------------------------ВИДАЛЕННЯ ЕЛЕМЕНТІВ КОРЗИНИ\n\n\nfunction handlerDeleteCart(e) {\n    if (!e.target.closest(\".cart-item-delete\")) return;\n   \n    const idOfBook = e.target.closest(\".cart-item\").dataset.id;\n    try {\n        const indexToDelete = data.findIndex(({ _id }) => _id === idOfBook);\n        const oldPage = Math.floor(indexToDelete / itemPerPage + 1);\n        const products = data.filter(({ _id }) => _id !== idOfBook);\n        localStorage.setItem(LOCAL_KEY, JSON.stringify(products));\n        writeUserShoppingList(products);\n        data = JSON.parse(localStorage.getItem(LOCAL_KEY));\n        const pageCount = Math.floor((products.length - 1) / itemPerPage + 1);\n        pagination.setTotalItems(products.length);\n        pagination.reset(products.length);\n        pagination.movePageTo(oldPage > pageCount ? pageCount : oldPage);\n\n        if (data.length <=itemPerPage) {\n            container.style.display = \"none\";\n        } \n        let currentPage = pagination.getCurrentPage();\n       \n        cartList.innerHTML = createCartMurkup(data, currentPage);\n  } catch (error) {\n    console.error(\"Get state error: \", error.message);\n    }\n    if (!data.length) {\n    emptyCart.style.display = \"block\";\n}\n}\n\n\n\n\n\n\n"],"names":["amazonIco","appleIco","cartIco","LOCAL_KEY","container","cartList","emptyCart","windowInnerWidth","itemPerPage","visiblePage","data","showLoader","hideLoader","createCartMurkup","error","options","pagination","Pagination","handlerDeleteCart","event","currentPage","arr","start","end","_id","author","book_image","title","description","amazon","appleBook","list_name","e","idOfBook","indexToDelete","oldPage","products","writeUserShoppingList","pageCount"],"mappings":"+GAAA,MAAeA,EAAA,uDCAAC,EAAA,6wJCAAC,EAAA,6DCSTC,EAAY,WACZC,EAAY,SAAS,cAAc,aAAa,EAChDC,EAAW,SAAS,cAAc,YAAY,EAC9CC,EAAY,SAAS,cAAc,aAAa,EAEhDC,EAAmB,OAAO,WAEhC,IAAIC,EAAc,EACdC,EAAc,EAEdF,EAAmB,MACnBC,EAAc,EACdC,EAAc,GAGlBH,EAAU,MAAM,QAAU,OAE1B,IAAII,EAAO,CAAA,EAEXC,IAEA,GAAI,CACAD,EAAO,KAAK,MAAM,aAAa,QAAQP,CAAS,CAAC,EACjDS,IACSF,EAAK,SACNJ,EAAU,MAAM,QAAU,SAE9BI,EAAK,QAASF,IACVJ,EAAU,MAAM,QAAU,QAE1BC,EAAS,UAAYQ,EAAiBH,EAAM,CAAC,CAEtD,OAAQI,EAAP,CACA,QAAQ,MAAM,oBAAqBA,EAAM,OAAO,CACjD,CAEH,MAAMC,EAAU,CACZ,WAAYL,EAAK,OACjB,aAAcF,EACd,aAAcC,EACd,KAAM,EACN,YAAa,GACb,SAAU,CACL,KAAM,gDACN,YAAa,iEACb,WACI,mGAGJ,mBACI,gHAGJ,WACI,mGAGP,CACN,EAEA,IAAIO,EAAa,IAAIC,EAAWb,EAAWW,CAAO,EAIlD,SAAS,iBAAiB,QAASG,CAAiB,EAGpDF,EAAW,GAAG,YAAcG,GAAU,CAClC,IAAIC,EAAcD,EAAM,KACvBd,EAAS,UAAYQ,EAAiBH,EAAMU,CAAW,CAC5D,CAAC,EAYD,SAASP,EAAiBQ,EAAKD,EAAa,CACxCf,EAAS,UAAY,GAErB,MAAMiB,EAAQd,GAAeY,EAAY,GACnCG,EAAMD,EAAQd,EAEpB,OADsBa,EAAI,MAAMC,EAAOC,CAAG,EACrB,IAAI,CAAC,CAAE,IAAAC,EAAK,OAAAC,EAAQ,WAAAC,EAAY,MAAAC,EAAO,YAAAC,EAAa,UAAW,CAAC,CAAC,IAAIC,CAAM,EAAG,CAAC,IAAIC,CAAS,CAAC,EAAG,UAAAC,CAAW,IAC5H,oCAAoCP;AAAA,wBACpBE,WAAoBC;AAAA;AAAA;AAAA,8CAGEA;AAAA,gEACkBI;AAAA;AAAA,mDAEbH;AAAA,8DACWH;AAAA;AAAA;AAAA,6BAGjCvB;AAAA;AAAA;AAAA;AAAA,+BAIE2B,uDAA4D7B;AAAA,+BAC5D8B,uDAA+D7B;AAAA;AAAA;AAAA,cAGhF,EAAE,KAAK,EAAE,CACvB,CAMA,SAASiB,EAAkBc,EAAG,CAC1B,GAAI,CAACA,EAAE,OAAO,QAAQ,mBAAmB,EAAG,OAE5C,MAAMC,EAAWD,EAAE,OAAO,QAAQ,YAAY,EAAE,QAAQ,GACxD,GAAI,CACA,MAAME,EAAgBxB,EAAK,UAAU,CAAC,CAAE,IAAAc,KAAUA,IAAQS,CAAQ,EAC5DE,EAAU,KAAK,MAAMD,EAAgB1B,EAAc,CAAC,EACpD4B,EAAW1B,EAAK,OAAO,CAAC,CAAE,IAAAc,KAAUA,IAAQS,CAAQ,EAC1D,aAAa,QAAQ9B,EAAW,KAAK,UAAUiC,CAAQ,CAAC,EACxDC,EAAsBD,CAAQ,EAC9B1B,EAAO,KAAK,MAAM,aAAa,QAAQP,CAAS,CAAC,EACjD,MAAMmC,EAAY,KAAK,OAAOF,EAAS,OAAS,GAAK5B,EAAc,CAAC,EACpEQ,EAAW,cAAcoB,EAAS,MAAM,EACxCpB,EAAW,MAAMoB,EAAS,MAAM,EAChCpB,EAAW,WAAWmB,EAAUG,EAAYA,EAAYH,CAAO,EAE3DzB,EAAK,QAASF,IACdJ,EAAU,MAAM,QAAU,QAE9B,IAAIgB,EAAcJ,EAAW,iBAE7BX,EAAS,UAAYQ,EAAiBH,EAAMU,CAAW,CAC5D,OAAQN,EAAP,CACA,QAAQ,MAAM,oBAAqBA,EAAM,OAAO,CAC/C,CACIJ,EAAK,SACVJ,EAAU,MAAM,QAAU,QAE9B"}